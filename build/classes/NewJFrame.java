
import java.awt.Color;
import java.awt.Component;
import java.awt.TextField;
import javax.swing.JButton;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JSlider;
import javax.swing.SwingConstants;

/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JFrame.java to edit this template
 */

/**
 *
 * @author Álvaro
 */
public class NewJFrame extends javax.swing.JFrame {

    /**
     * Creates new form NewJFrame
     */
    public NewJFrame() {
        initComponents();
        setupGUI();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jSlider1 = new javax.swing.JSlider();
        slider = new javax.swing.JSlider();
        botonRangos = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setSize(new java.awt.Dimension(45, 45));
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        slider.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                sliderStateChanged(evt);
            }
        });
        getContentPane().add(slider, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 710, 415, -1));

        botonRangos.setText("Evaluar");
        botonRangos.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                botonRangosMouseClicked(evt);
            }
        });
        getContentPane().add(botonRangos, new org.netbeans.lib.awtextra.AbsoluteConstraints(460, 670, 103, 39));

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void sliderStateChanged(javax.swing.event.ChangeEvent evt) {//GEN-FIRST:event_sliderStateChanged
        textoPorcentaje.setText(String.valueOf(slider.getValue() + "%"));
    }//GEN-LAST:event_sliderStateChanged

    private void botonRangosMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_botonRangosMouseClicked
        parser(inputRangos.getText());
    }//GEN-LAST:event_botonRangosMouseClicked

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new NewJFrame().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton botonRangos;
    private javax.swing.JSlider jSlider1;
    private javax.swing.JSlider slider;
    // End of variables declaration//GEN-END:variables


 private static final int LADO = 13;
    private static final int SEPARACION = 50;
    private static final int OFFSET = 10;
    private static final int TAMAÑO = 45;
    public static JLabel[][] cuadricula = new JLabel[LADO][LADO];
    //public static JFrame this = new JFrame("Prueba JFrame");
    public static TextField inputRangos = new TextField(100);
    //public static JButton botonRangos = new JButton("Evaluar");
    //public static JSlider porcentaje = new JSlider();
    public static JLabel textoPorcentaje = new JLabel();
    
    private static String[] cartas =  {"A", "K", "Q", "J", "T", "9", "8", "7", "6", "5", "4", "3", "2"};
    /*
    
        if(fila = columna) NADA/PAREJAS -VERDE
        if(fila > columna) Ofsuites - Gris
        if(colummna > fila) Suited - Rojo
        SELECCION - AMRILLO
    */
    
    /*
        1. Separar por comas
        2. Buscar operador
            Si lo hay: se trata
            Sino: se pinta
    
        Si hay +:
            Pareja: Desde la pareja hasta el 00
    
            No pareja:
                Carta alta no se mueve (1era)
                Carta baja: desde carta baja - cartaAlta+1
            suited: va a la derecha
            offsuited: va para abajo
   
        Si hay -:
            desde el 1er rango 
            desde rango baja - cartaAlta+1 -- hasta final o encontrear el rango superior | excluyendo parejas
    */
    
    public void parser(String rango)
    {
        String[] partes = rango.split(",");
        
        for(int i = 0; i < partes.length;i++) //Por cada rango
        {
            if(partes[i].contains("+"))
            {
                rangoMas(partes[i]);
            }
            else if(partes[i].contains("-"))
            {
                
            }
            else
            {
                rangoParejas(partes[i]);
            }
        }
    }
    
    
    public int traductor(char carta)
    {
        switch (carta) {
            case 'A':
                return 0;
            case 'K':
                return 1;
            case 'Q':
                return 2;
            case 'J':
                return 3;
            case 'T':
                return 4;
            case '9':
                return 5;
            case '8':
                return 6;
            case '7':
                return 7;
            case '6':
                return 8;
            case '5':
                return 9;
            case '4':
                return 10;
            case '3':
                return 11; 
            case '2':
                return 12;
        }
        return 0;
    }
    
    
    public void setupGUI()
    {
        textoPorcentaje.setText(String.valueOf(slider.getValue() + "%"));
        
        this.setLayout(null);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setSize(1080,1080);
        
        inputRangos.setBounds(OFFSET, SEPARACION*LADO + OFFSET *2, 400, 30);
        this.add(inputRangos);
        
       /* botonRangos.setBounds(450, SEPARACION*LADO + OFFSET *2, 200 , 30);
        this.add(botonRangos);*/
        
        /*porcentaje.setBounds(OFFSET, SEPARACION*LADO + OFFSET *6, 400, 30);
        this.add(porcentaje);*/
        
        textoPorcentaje.setBounds(450, SEPARACION*LADO + OFFSET *7, 100, 30);
        textoPorcentaje.setBackground(Color.WHITE);
        textoPorcentaje.setOpaque(true);
        this.add(textoPorcentaje);
        
        for(int fila = 0; fila < LADO;fila++)
        {
            for(int columna = 0; columna < LADO; columna++)
            {
                if(columna > fila )
                {
                    cuadricula[fila][columna] = new JLabel(cartas[fila]+cartas[columna] + "o", SwingConstants.CENTER);
                }
                else if (columna == fila)
                {
                    cuadricula[fila][columna] = new JLabel(cartas[fila]+cartas[columna], SwingConstants.CENTER);
                }
                else
                {
                    cuadricula[fila][columna] = new JLabel(cartas[columna] + cartas[fila] + "s", SwingConstants.CENTER);        
                }
                 
                 cuadricula[fila][columna].addMouseListener(new java.awt.event.MouseAdapter() 
                 {
                     public void mouseClicked(java.awt.event.MouseEvent evt) {
                        clickEtiqueta(evt);
                    }
                });
                  cuadricula[fila][columna].setOpaque(true);
                  cuadricula[fila][columna].setBackground(Color.WHITE);
                  cuadricula[fila][columna].setSize(TAMAÑO,TAMAÑO);
                  cuadricula[fila][columna].setBounds(SEPARACION * fila + OFFSET, SEPARACION * columna +OFFSET, cuadricula[fila][columna].size().width, cuadricula[fila][columna].size().height);
                  this.add(cuadricula[fila][columna]);
            }
        }

        this.setVisible(true);
    }
    
    private void clickEtiqueta(java.awt.event.MouseEvent evt) 
    {                                    
        JLabel etiqueta = (JLabel)evt.getComponent();
        //etiqueta.setText("a");
    }   

    private void rangoParejas(String rango) 
    {
        int valor = traductor(rango.charAt(0));
        
        cuadricula[valor][valor].setBackground(Color.red);
        for(int i = valor-1; i >= 0; i--)
        {
            cuadricula[i][i].setBackground(Color.red);
        }
    }

    /*
    Si hay +:
            Pareja: Desde la pareja hasta el 00
    
            No pareja:
                Carta alta no se mueve (1era)
                Carta baja: desde carta baja - cartaAlta+1
            suited: va a la derecha
            offsuited: va para abajo
    */
    private void rangoMas(String rango) 
    {
        if (rango.charAt(0) == rango.charAt(1)) //Pareja
        {
            rangoParejas(rango.substring(0, 1));
        } 
        else 
        {
            if(rango.contains("o"))
            {
                int columna = traductor(rango.charAt(0)); 
                int fila = traductor(rango.charAt(1)); 

                int i = fila;
                while(i >= 0 && columna !=i)
                {
                    cuadricula[columna][i].setBackground(Color.red);
                    i--;
                }
            }
            else //s
            {
                int fila = traductor(rango.charAt(0)); 
                int columna = traductor(rango.charAt(1)); 

                int i = columna;
                while(i >= 0 && fila !=i)
                {
                    cuadricula[i][fila].setBackground(Color.red);
                    i--;
                }
            }
                
        }
    }

}
